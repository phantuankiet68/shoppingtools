// ==== Page.prisma (đã chỉnh) ====
model Page {
  id        String      @id @default(cuid())
  siteId    String
  site      Site        @relation(fields: [siteId], references: [id], onUpdate: Cascade)
  locale    Locale
  title     String
  slug      String
  path      String
  status    PageStatus  @default(DRAFT)
  blocks    Json
  seoTitle          String?
  seoDesc           String?
  coverImage        String?
  seoKeywords       String?
  canonicalUrl      String?
  noindex           Boolean?     @default(false)
  nofollow          Boolean?     @default(false)
  ogTitle           String?
  ogDescription     String?
  twitterCard       TwitterCard? @default(SUMMARY_LARGE_IMAGE)
  sitemapChangefreq Changefreq?  @default(WEEKLY)
  sitemapPriority   Float?       @default(0.7)
  structuredData    Json?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([siteId, locale, slug])
  @@unique([siteId, path])

  sections  Section[]

  @@index([siteId, locale])
  @@index([siteId, locale, updatedAt])
}

enum PageStatus {
  DRAFT
  PUBLISHED
}

enum TwitterCard {
  SUMMARY
  SUMMARY_LARGE_IMAGE
}

enum Changefreq {
  ALWAYS
  HOURLY
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
  NEVER
}

model Section {
  id        String   @id @default(cuid())
  pageId    String
  type      String   // "hero" | "text" | "gallery"...
  enabled   Boolean  @default(true)
  sort      Int      @default(0)

  data      Json     // nội dung + props
  style     Json?    // style override (optional)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  page      Page     @relation(fields: [pageId], references: [id], onDelete: Cascade)

  @@index([pageId, sort])
  @@index([type])
}
