enum MenuItemType {
  PAGE
  CUSTOM_URL
}

enum MenuSetKey {
  home
  dashboard
}

model MenuItem {
  id        String       @id @default(cuid())
  siteId    String       @map("site_id")
  parentId  String?      @map("parent_id")
  pageId    String?      @map("page_id")
  title     String?
  type      MenuItemType @default(PAGE)
  customUrl String?      @map("custom_url")
  sortOrder Int          @default(0) @map("sort_order")
  visible   Boolean      @default(true)
  setKey    MenuSetKey   @default(home) @map("set_key")
  createdAt DateTime     @default(now()) @map("created_at")
  updatedAt DateTime     @updatedAt @map("updated_at")
  deletedAt DateTime?    @map("deleted_at")
  site      Site         @relation(fields: [siteId], references: [id], onDelete: Cascade)
  page      Page?        @relation(fields: [pageId], references: [id], onDelete: SetNull)
  parent    MenuItem?    @relation("MenuTree", fields: [parentId], references: [id], onDelete: SetNull)
  children  MenuItem[]   @relation("MenuTree")
  @@index([siteId])
  @@index([siteId, setKey])
  @@index([parentId])
  @@index([pageId])
  @@index([siteId, setKey, sortOrder])
  @@index([siteId, visible])
  @@map("menu_items")
}
