enum CalendarEventColor {
  BLUE
  PURPLE
  GREEN
  AMBER
  RED
  TEAL
}

model Calendar {
  id        String   @id @default(cuid())
  ownerId   String
  name      String
  isDefault Boolean  @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  owner     User     @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  events    CalendarEvent[]

  @@index([ownerId])
  @@unique([ownerId, name])
}

model CalendarEvent {
  id          String   @id @default(cuid())
  calendarId  String
  creatorId   String

  title       String
  description String?
  location    String?

  color       CalendarEventColor @default(BLUE)

  allDay      Boolean  @default(false)
  startAt     DateTime
  endAt       DateTime

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  calendar    Calendar @relation(fields: [calendarId], references: [id], onDelete: Cascade)
  creator     User     @relation("UserCreatedEvents", fields: [creatorId], references: [id], onDelete: Cascade)

  @@index([calendarId, startAt])
  @@index([creatorId, startAt])
}
