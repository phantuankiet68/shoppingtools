enum AddressType {
  SHIPPING
  BILLING
}

enum AddressStatus {
  ACTIVE
  INACTIVE
}

model Address {
  id         String   @id @default(cuid())

  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  customerId String
  customer   Customer @relation(fields: [customerId], references: [id], onDelete: Cascade)

  label      String?
  type       AddressType   @default(SHIPPING)
  status     AddressStatus @default(ACTIVE)

  isDefault  Boolean  @default(false)

  receiverName String
  phone        String?
  email        String?

  line1      String
  line2      String?
  ward       String?
  district   String?
  city       String
  region     String?
  country    String    @default("VN")
  postalCode String?

  notes      String?
  meta       Json?

  deletedAt  DateTime?

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([userId, customerId, createdAt])
  @@index([customerId, type, isDefault])
  @@index([status, updatedAt])
  @@index([country, city])
}
